タグのパースの工程を詳細に仕様化する。

初期状態
    ':'でなければ不適合。
    タグ名読み込み中に遷移。

タグ名読み込み中
    空白、改行、ブロック終了(EOF)
        タグ名あり
            属性読み込み開始に遷移。
        タグ名なし
            不適合。
    タグ名に使える文字
        バッファに追加。
    タグ名に使えない文字
        "There is an illegal character. '{}'", c

属性読み込み開始
    '['でなければ空。
    新規属性待ちに遷移。

新規属性待ち
    ']'だったら内容読み込み開始に遷移。
    '"'だったら引用符付き属性値読み込み開始に遷移。
    空白、改行、ブロック開始、ブロック終了だったらスキップ。
    属性名に使える文字なら
        属性名読み込み中に遷移。
    それ以外の文字だったら
        単純属性値に'.'なども使えることを考えるとこうではない。
        "There is an illegal character. {}", c
    EOFだったら
        "'{}' is required.", "]"
    
属性名読み込み中
    英数字かハイフンだったら
        バッファに追加。
    '='だったら
        属性名あり
            次が'"'だったら引用符付き属性値読み込み開始に遷移。
            そうでなければ単純属性値読み込み開始に遷移。
        属性名なし
            "There is an illegal character. {}", "="
    ','、']'だったら
        属性名あり
            属性名を無名属性値と見なす。新規属性待ちに遷移。
        属性名なし
            あり得ない。前に他の文字がなければこのモードにならない。
    属性名に使えない文字
        "There is an illegal character. '{}'", c
    空白、改行、ブロック終了(EOF)だったら
        "Unexpected end of attribute name."
    ブロック開始、EOF
        あり得ない。その前の改行でモードを抜けているはず。

単純属性値読み込み開始

引用符付き属性値読み込み開始


内容読み込み開始




インラインの警告
    '}'がない。
        "'}' is required."

属性のパースの仕方を整理する。
次の属性待ち
    ']'で終了。
    カンマはNG。
    改行はスキップ。
    EOFはNG。
    他の文字だったら属性をパース。
        成功
            重複はNG。
            属性の直後に。
        失敗
            警告はすでに設定済み。失敗で終了。
属性の直後
    ']'で終了。
    カンマ => 次の属性待ち
    改行はスキップ。
    EOFはNG。
    他の文字はNG。



処理結果を表す
どのタイミングで何が出現したらどの警告をするのか仕様として整理する。
現状）
属性
    不要なカンマがある。"It's a comma you don't need." => "There is an illegal character. {}"
    必要なカンマがない。"A comma is required."
    属性が重複している。"The attributes are duplicated."
    属性の形式が不正。"The attribute is malformed."
        属性のパースに失敗したときに親が設定しているが、子が設定しているものがあれば十分では。
    最後の]がない。"] is required." => "']' is required."
    属性名がない時だが、形式不正と同じでは？"There is no attribute name."
    無効にしてしまっているが必要？"A quoted attribute value is not closed."
    引用符なし属性に不正な文字。"{} cannot be written in the middle of an attribute value."
ブロックタグ
    （タグ名と属性は別でパース）
    タグ名か属性名の後に不正な文字。"There is an illegal character. '{}'"
インラインタグ
    内容がない（パース失敗）"There is no tag's contents."
    内容の終わりがない。"} is required."